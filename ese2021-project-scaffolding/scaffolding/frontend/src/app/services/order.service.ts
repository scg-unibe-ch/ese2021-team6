import { Injectable } from '@angular/core';
import { Order } from '../models/order.model';
import { Subject } from 'rxjs';

@Injectable({
  providedIn: 'root'
})
export class OrderService {

  /*******************************************************************************************************************
   * VARIABLES
   ******************************************************************************************************************/

  private order: Order = new Order(0, '', '', '', '', 0);

  /*******************************************************************************************************************
   * OBSERVABLE SOURCES & STREAMS
   ******************************************************************************************************************/

  // Observable Sources
  private orderSource = new Subject<Order>();

  // Observable Streams
  order$ = this.orderSource.asObservable();

  /*******************************************************************************************************************
   * GETTERS
   ******************************************************************************************************************/

  getOrder(): Order {
    return this.order;
  }

  /*******************************************************************************************************************
   * SETTERS
   ******************************************************************************************************************/

  setOrder(newOrder: Order): void {
    this.orderSource.next(newOrder);
  }

  /*******************************************************************************************************************
   * CONSTRUCTOR
   ******************************************************************************************************************/

  constructor() {
    // Observer
    this.order$.subscribe(res => this.order = res);
    this.setOrder(new Order(0, '', '', '', '', 0));
  }
}
